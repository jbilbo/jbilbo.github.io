---
layout: post
title: Migrar de Devfs a Udev en Gentoo
date: '2004-11-17T19:53:00.000-08:00'
author: jbilbo
tags:
- Software Libre
modified_time: '2010-04-19T09:55:35.060-07:00'
blogger_id: tag:blogger.com,1999:blog-2802132546636710453.post-4815224619726884231
blogger_orig_url: http://jhernandez.gpltarragona.org/2004/11/migrar-de-devfs-udev-en-gentoo.html
---

Udev es la nueva forma de gestionar el /dev en linux, nacido para sustituir el bastante desastroso devfs. Actualmente <b>es un requisito para Gnome 2.8</b>, ya que lo utiliza para gestionar los dispositivos. <br/>Los usuarios de Gentoo han estado utilizando prácticamente desde que salió la distribución esa gestión a través de Devfs (en en kernel se le reconoce por "/dev file system support (OBSOLETE)"), así que ahora toca el cambio.<br/><br/>Existe 2 guías que hablan sobre la migración de devfs a udev:<br/><br/>- <a href="http://www.gentoo.org/doc/en/migration-to-2.6.xml">Guía completa para migrar a un kernel 2.6 en Gentoo</a>. (inglés).<br/>- <a href="http://www.gentoo.org/doc/en/udev-guide.xml">Guía de Udev para Gentoo</a>. (inglés)<br/><br/>Yo voy a resumir los pasos a seguir que he hecho para que funcione, siguiendo estas guías:<br/><br/><a href="http://jhernandez.gpltarragona.org/blog/archives/000245.html">Migramos al nuevo hotplug</a> (Si es que todavía no lo hemos hecho)<br/><br/><pre>emerge --sync<br/>emerge udev</pre><br/><br/>Vamos a nuestro kernel (recomiendo el último gentoo-dev-sources):<br/><br/><pre>cd /usr/src/linux<br/>make menuconfig</pre><br/><br/>Opciones requeridas:<br/><br/><pre>General setup ---><br/>  [*] Support for hot-pluggable devices<br/><br/>File systems ---><br/>  Pseudo filesystems ---><br/>    [*] /proc file system support<br/>    [*] Virtual memory file system support (former shm fs)</pre><br/><br/>Opciones que debemos deshabilitar (la de la dev se puede dejar, pero para qué...):<br/><br/><pre>File systems ---><br/>  Pseudo Filesystems ---><br/>    [ ] /dev file system support (OBSOLETE)<br/>      [ ]   Automatically mount at boot</pre><br/><br/>Ahora compilamos y modificamos el grub como siempre:<br/><br/><pre>make && make modules_install<br/>cp arch/i386/boot/bzImage /boot/kernel-con-udev<br/>vi /boot/grub/grub.conf</pre><br/><br/>Si utilizamos genkernel, hay una manera para compilar el kernel con las opciones necesarias para udev automáticamente utilizando este comando:<br/><br/><pre>genkernel --udev --menuconfig --bootloader=grub all</pre><br/><br/>La opción --menuconfig te abrirá el menú del kernel par retocar lo que se quiera antes de empezar a compilar con las opciones que el genkernel pone. También automáticamente te actualizará el grub... suena muy bien si hace lo que dice, pero no lo he probado :)<br/><br/>Editado: <a href="http://www.gpltarragona.org/node/view/321">Artículo</a> en gpltarragona.